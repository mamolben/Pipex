pipex_bonus/
â”‚
â”œâ”€â”€ includes/
â”‚   â”œâ”€â”€ pipex.h          // Header base: functions standar y common, core pipex 
â”‚   â””â”€â”€ pipex_bonus.h    // Header bonus: here_doc, do_pipe, setup, exec_cmd
â”‚
â”œâ”€â”€ src/				 // Core pipex
â”‚   â””â”€â”€ pipex.c          // process_child, process_parent, init_fds, execute, main (mandatory)
â”‚
â”œâ”€â”€ src_common/          // CÃ³digo comÃºn a mandatory y bonus
â”‚   â”œâ”€â”€ libft_string.c   // ft_strlen, *ft_strdup, *ft_substr, ft_strlcpy, *ft_strjoin
â”‚   â”œâ”€â”€ libft_split.c    // count_substr, free_split, *copy_substr, fill_array, ft_split
â”‚   â”œâ”€â”€ libft_mem_comp.c // ft_free, ft_strncmp
â”‚   â”œâ”€â”€ libft_fd.c		 // ft_putchar_fd, ft_putstr_fd, ft_putendl_fd
â”‚   â”œâ”€â”€ path.c           // get_path, join_path, find_path_env
â”‚   â””â”€â”€ error.c          // ft_error, ft_error_cmd, ft_error_file, ft_error_argc
â”‚
â”œâ”€â”€ src_bonus/           // Solo para el bonus
â”‚   â”œâ”€â”€ pipex_bonus.c      // setup_fds, exec_cmd, main_bonus 
â”‚   â””â”€â”€ pipe_process_bonus.c // child_process, parent_process, do_pipe, open_heredoc_fd, get_next_line

1. includes/

pipex.h â†’ header base con:
	Libft (cadenas, split, memoria, fd)
	Manejo de errores (ft_error, ft_error_cmd, etc.)
	Funciones de path (get_path, join_path, find_path_env)
	Funciones core de pipex normal (process_child, process_parent, init_fds, execute)

pipex_bonus.h â†’ header bonus con:
	Pipes y here_doc: do_pipe, child_process, parent_process, open_heredoc_fd, get_next_line
	Setup y ejecuciÃ³n bonus: setup_fds, exec_cmd

2 src/
	pipex.c â†’ mandatory
		process_child, process_parent, init_fds, execute, main

3. src_common/ (compartido entre mandatory y bonus)

	libft_string.c, libft_split.c, libft_mem_dup.c, libft_fd.c
	Funciones auxiliares de cadenas, split, memoria, fd

	path.c â†’ manejo de PATH (get_path, join_path, find_path_env)

	error.c â†’ manejo de errores (ft_error, ft_error_cmd, ft_error_file, ft_error_argc)

ğŸ”¹ Flujo de ejecuciÃ³n
Mandatory (pipex normal)

main() en pipex.c

Llama init_fds() â†’ abre infile/outfile

Crea pipe y forks con process_child() y process_parent()

Ejecuta los dos comandos

Cierra fds y espera hijos

[infile / outfile] ---> init_fds() ---> STDIN (infile)
                              |
                              v
                         process_child(cmd1 < infile)
                              |
                              v
                pipe -> process_parent(cmd2 > outfile)
                              |
                              v
                         execute() ---> STDOUT (outfile)


4. src_bonus/
	
pipe_process_bonus.c

	do_pipe() â†’ crea pipe, fork, redirige stdin/stdout

	child_process() â†’ hijo de do_pipe

	parent_process() â†’ padre de do_pipe

	open_heredoc_fd() â†’ lee stdin hasta limiter y devuelve fd de lectura

	get_next_line() â†’ lectura de lÃ­nea para here_doc

pipex_bonus.c

	main() en pipex_bonus.c
	
	Llama setup_fds() â†’ abre stdin es infile o heredoc, stdout es outfile
	
	exec_cmd() â†’ ejecuta el Ãºltimo comando

	main() â†’ recorre todos los comandos intermedio â†’ do_pipe() (fork+pipe) y ejecuta el Ãºltimo
	
	Ãšltimo comando â†’ exec_cmd()

	Cada do_pipe():
		Hijo escribe en stdout (pipe write)
		Hijo â†’ dup2 a pipe write â†’ exec_cmd

		Padre lee desde pipe (pipe read) para el siguiente comando
		Padre â†’ dup2 a pipe read â†’ next command

		here_doc solo afecta stdin del primer comando.
    

Flujo de datos en bonus
[infile / heredoc] ---> setup_fds() ---> STDIN
                              |
                              v
                         do_pipe(cmd1)
                              |
                              v
                         do_pipe(cmd2)
                              |
                             ...
                              |
                              v
                         exec_cmd(Ãºltimo cmd) ---> STDOUT (outfile)

Ventajas de esta estructura



           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚  Usuario/     â”‚
           â”‚  Here_doc     â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ stdin
                   â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ open_heredoc_fdâ”‚
           â”‚  (pipe read)   â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ stdin
                   â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚   setup_fds() â”‚
           â”‚   dup2(stdin) â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ do_pipe(cmd1)       â”‚
       â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
       â”‚ â”‚ child_process â”‚â”€â”€â–¶â”‚ stdout â†’ pipe write
       â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
       â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
       â”‚ â”‚ parent_processâ”‚â—€â”€â”€â”‚ stdin â† pipe read
       â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ stdin
                 â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ do_pipe(cmd2)       â”‚
       â”‚ ... mismo flujo ... â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ stdin
                 â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ exec_cmd(Ãºltimo cmd)â”‚
       â”‚ stdout â†’ outfile    â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Leyenda

Flechas hacia abajo â†’ flujo de datos (stdin/stdout)

do_pipe â†’ crea un pipe y hace fork:

Hijo escribe en stdout (pipe write)

Padre redirige stdin al read end del pipe

open_heredoc_fd â†’ genera el primer fd de stdin si usamos here_doc

exec_cmd Ãºltimo comando â†’ escribe directamente al outfile
